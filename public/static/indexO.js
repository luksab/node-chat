var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var c=0;return function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var c="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return c?c.call(b):$jscomp.arrayIterator(b)};
$jscomp.checkStringArgs=function(b,c,k){if(null==b)throw new TypeError("The 'this' value for String.prototype."+k+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+k+" must not be a regular expression");return b+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,k){b!=Array.prototype&&b!=Object.prototype&&(b[c]=k.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,c,k,g){if(c){k=$jscomp.global;b=b.split(".");for(g=0;g<b.length-1;g++){var e=b[g];e in k||(k[e]={});k=k[e]}b=b[b.length-1];g=k[b];c=c(g);c!=g&&null!=c&&$jscomp.defineProperty(k,b,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("String.prototype.repeat",function(b){return b?b:function(b){var c=$jscomp.checkStringArgs(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var g="";b;)if(b&1&&(g+=c),b>>>=1)c+=c;return g}},"es6","es3");$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6","es3");$jscomp.owns=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)};
$jscomp.polyfill("Object.values",function(b){return b?b:function(b){var c=[],g;for(g in b)$jscomp.owns(b,g)&&c.push(b[g]);return c}},"es8","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function c(){this.batch_=null}function k(d){return d instanceof e?d:new e(function(b,c){b(d)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;c.prototype.asyncExecute=function(d){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(d);return this};c.prototype.asyncExecuteBatch_=function(){var d=this;this.asyncExecuteFunction(function(){d.executeBatch_()})};var g=$jscomp.global.setTimeout;c.prototype.asyncExecuteFunction=function(d){g(d,
0)};c.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var d=this.batch_;this.batch_=[];for(var b=0;b<d.length;++b){var c=d[b];d[b]=null;try{c()}catch(z){this.asyncThrow_(z)}}}this.batch_=null};c.prototype.asyncThrow_=function(b){this.asyncExecuteFunction(function(){throw b;})};var e=function(b){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var d=this.createResolveAndReject_();try{b(d.resolve,d.reject)}catch(p){d.reject(p)}};e.prototype.createResolveAndReject_=
function(){function b(b){return function(d){e||(e=!0,b.call(c,d))}}var c=this,e=!1;return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};e.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof e)this.settleSameAsPromise_(b);else{a:switch(typeof b){case "object":var d=null!=b;break a;case "function":d=!0;break a;default:d=!1}d?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};e.prototype.resolveToNonPromiseObj_=function(b){var d=
void 0;try{d=b.then}catch(p){this.reject_(p);return}"function"==typeof d?this.settleSameAsThenable_(d,b):this.fulfill_(b)};e.prototype.reject_=function(b){this.settle_(2,b)};e.prototype.fulfill_=function(b){this.settle_(1,b)};e.prototype.settle_=function(b,c){if(0!=this.state_)throw Error("Cannot settle("+b+", "+c+"): Promise already settled in state"+this.state_);this.state_=b;this.result_=c;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=
0;b<this.onSettledCallbacks_.length;++b)r.asyncExecute(this.onSettledCallbacks_[b]);this.onSettledCallbacks_=null}};var r=new c;e.prototype.settleSameAsPromise_=function(b){var d=this.createResolveAndReject_();b.callWhenSettled_(d.resolve,d.reject)};e.prototype.settleSameAsThenable_=function(b,c){var d=this.createResolveAndReject_();try{b.call(c,d.resolve,d.reject)}catch(z){d.reject(z)}};e.prototype.then=function(b,c){function d(b,d){return"function"==typeof b?function(d){try{k(b(d))}catch(C){g(C)}}:
d}var k,g,y=new e(function(b,d){k=b;g=d});this.callWhenSettled_(d(b,k),d(c,g));return y};e.prototype.catch=function(b){return this.then(void 0,b)};e.prototype.callWhenSettled_=function(b,c){function d(){switch(e.state_){case 1:b(e.result_);break;case 2:c(e.result_);break;default:throw Error("Unexpected state: "+e.state_);}}var e=this;null==this.onSettledCallbacks_?r.asyncExecute(d):this.onSettledCallbacks_.push(d)};e.resolve=k;e.reject=function(b){return new e(function(d,c){c(b)})};e.race=function(b){return new e(function(d,
c){for(var e=$jscomp.makeIterator(b),g=e.next();!g.done;g=e.next())k(g.value).callWhenSettled_(d,c)})};e.all=function(b){var c=$jscomp.makeIterator(b),d=c.next();return d.done?k([]):new e(function(b,e){function g(d){return function(c){p[d]=c;r--;0==r&&b(p)}}var p=[],r=0;do p.push(void 0),r++,k(d.value).callWhenSettled_(g(p.length-1),e),d=c.next();while(!d.done)})};return e},"es6","es3");
function cycleNavBar(b){window.matchMedia("(min-width: 800px)").matches||("25em"==document.getElementById("mySidenav").style.width?document.getElementById("mySidenav").style.width="0":b||(document.getElementById("mySidenav").style.width="25em"));return!1}window.onresize=function(b){window.matchMedia("(min-width: 800px)").matches&&"0px"==document.getElementById("mySidenav").style.width&&(document.getElementById("mySidenav").style.width="25em")};
window.onload=function(){function b(a){var b="=".repeat((4-a.length%4)%4);a=(a+b).replace(/\-/g,"+").replace(/_/g,"/");a=window.atob(a);b=new Uint8Array(a.length);for(var h=0;h<a.length;++h)b[h]=a.charCodeAt(h);return b}function c(){u.addEventListener("click",function(){u.disabled=!0;w?r():e()});D.pushManager.getSubscription().then(function(a){w=null!==a;g(a);w?console.log("User IS subscribed."):console.log("User is NOT subscribed.");k()})}function k(){"denied"===Notification.permission?(u.textContent=
"Push Messaging Blocked.",u.disabled=!0,g(null)):(u.textContent=w?"Disable Push Messaging":"Enable Push Messaging",u.disabled=!1)}function g(a){m.emit("push",a);console.log(JSON.stringify(a))}function e(){var a=b("BM_12EMi2xCAVhD2tn_gr3DugdW_bYnxtVCJd1qzAZTag5gi-IH97Vetc5sYfr155JiPGceLMVMXy29GmFCES20");D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:a}).then(function(a){console.log("User is subscribed.");g(a);w=!0;k()}).catch(function(a){console.error("Failed to subscribe the user: ",
a);k()})}function r(){D.pushManager.getSubscription().then(function(a){if(a)return a.unsubscribe()}).catch(function(a){console.error("Error unsubscribing",a)}).then(function(){g(null);console.log("User is unsubscribed.");w=!1;k()})}function d(a){try{var b=G.transaction(["messages"],"readwrite").objectStore("messages").index("chat").openCursor();b.onsuccess=function(b){if(b=b.target.result)a===b.value.chat&&(n.innerHTML+="<p><b>"+b.value.sender+"</b>"+b.value.message+"</p>"),b.continue()};b.onerror=
function(a){return console.log(a)};return!0}catch(h){return console.log(h),!1}}function y(a,b,h){try{var f=G.transaction(["messages"],"readwrite").objectStore("messages").add({chat:a,sender:b,message:h});f.onsuccess=function(a){};f.onerror=function(a){console.error(a)}}catch(S){console.error(S)}}function p(a,b){y(l,a,b);q.hasOwnProperty(l)||(q[l]=[]);q[l].push({from:a,msg:b});n.innerHTML+="<p><b>"+a+"</b>"+b+"</p>";setTimeout(function(){return n.scrollTop=n.scrollHeight})}function z(a,b){J.push({from:a,
msg:b});"allChat"==l&&(n.innerHTML+="<p><b>"+a+"</b>"+b+"</p>",setTimeout(function(){return n.scrollTop=Number.MAX_SAFE_INTEGER}))}function A(a,b){n.innerHTML+="<p><b>"+a+"</b>"+b+"</p>";setTimeout(function(){return n.scrollTop=Number.MAX_SAFE_INTEGER})}function I(a,b){n.innerHTML+="<p><b>"+a+'</b><img background-image src="'+b+'" width="'+((n.clientWidth|0)-20)+'"/></p>';setTimeout(function(){return n.scrollTop=Number.MAX_SAFE_INTEGER})}function Q(a,b){var h=(n.clientWidth|0)-20,f=document.createElement("p"),
d=document.createElement("b");f.appendChild(d);d.appendChild(document.createTextNode(""+a));b.style="width :"+h;f.appendChild(b);n.appendChild(f);setTimeout(function(){return n.scrollTop=Number.MAX_SAFE_INTEGER})}function R(a,b){a.slice?a=a.slice(0,131072):a.webkitSlice&&(a=a.webkitSlice(0,131072));var h=new FileReader;h.onload=function(a){a=new DataView(a.target.result);if(65496!=a.getUint16(0,!1))b(-2);else{for(var h=a.byteLength,f=2;f<h;){var d=a.getUint16(f,!1);f+=2;if(65505==d){if(1165519206!=
a.getUint32(f+=2,!1)){b(-1);return}d=18761==a.getUint16(f+=6,!1);f+=a.getUint32(f+4,d);var c=a.getUint16(f,d);f+=2;for(var e=0;e<c;e++)if(274==a.getUint16(f+12*e,d)){b(a.getUint16(f+12*e+8,d));return}}else if(65280!=(d&65280))break;else f+=a.getUint16(f,!1)}b(-1)}};h.readAsArrayBuffer(a)}function H(a,b,h,d,c,e){var f=new Image;f.onerror=function(){URL.revokeObjectURL(this.src);e(a)};f.onload=function(){URL.revokeObjectURL(this.src);R(a,function(a){var b=f.width,c=f.height,t=4<a?Math.min(d/b,h/c,1):
Math.min(h/b,d/c,1);c=Math.round(c*t);b=Math.round(b*t);t=c;c=document.createElement("canvas");4<a?(c.width=t,c.height=b):(c.width=b,c.height=t);1<a&&console.log("EXIF orientation = "+a+", rotating picture");var g=c.getContext("2d");switch(a){case 2:g.transform(-1,0,0,1,b,0);break;case 3:g.transform(-1,0,0,-1,b,t);break;case 4:g.transform(1,0,0,-1,0,t);break;case 5:g.transform(0,1,1,0,0,0);break;case 6:g.transform(0,1,-1,0,t,0);break;case 7:g.transform(0,-1,-1,0,t,b);break;case 8:g.transform(0,-1,
1,0,0,b)}g.drawImage(f,0,0,b,t);a=c.toDataURL("image/jpeg",.7);e(a,c)})};f.src=URL.createObjectURL(a)}function C(a,b){return new Promise(function(f){crypto.subtle.generateKey(a,!0,b).then(function(a){f(a)}).catch(function(a){return console.log(a.message)})})}function T(a){a=unescape(encodeURIComponent(a));for(var b=new Uint8Array(a.length),h=0;h<a.length;h++)b[h]=a.charCodeAt(h);return b}function U(a){a=new Uint8Array(a);for(var b="",h=0;h<a.byteLength;h++)b+=String.fromCharCode(a[h]);return b}function K(a,
b){a=new Uint8Array(a);for(var f="",c=0;c<a.byteLength;c++)f+=String.fromCharCode(a[c]);a=btoa(f);f="-----BEGIN "+b+"-----\r\n";for(c=0;c<a.length;)f=c+64<=a.length?f+(a.substr(c,64)+"\r\n"):f+(a.substr(c)+"\r\n"),c+=64;return f+("-----END "+b+"-----\r\n")}function L(a){a=a.split("\n");for(var b="",c=0;c<a.length;c++)0<a[c].trim().length&&0>a[c].indexOf("-BEGIN RSA PRIVATE KEY-")&&0>a[c].indexOf("-BEGIN RSA PUBLIC KEY-")&&0>a[c].indexOf("-END RSA PRIVATE KEY-")&&0>a[c].indexOf("-END RSA PUBLIC KEY-")&&
(b+=a[c].trim());a=atob(b);b=new Uint8Array(a.length);for(c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer}function V(a){return new Promise(function(b){crypto.subtle.importKey("spki",L(a),M,!0,["encrypt"]).then(function(a){b(a)}).catch(function(a){return console.log(a.message)})})}function W(a){return new Promise(function(b){crypto.subtle.importKey("spki",L(a),E,!0,["verify"]).then(function(a){b(a)})})}function N(a){return new Promise(function(b){window.crypto.subtle.exportKey("spki",a.publicKey).then(function(a){b(K(a,
"RSA PUBLIC KEY"))})})}function X(a){return new Promise(function(b){window.crypto.subtle.exportKey("pkcs8",a.privateKey).then(function(a){b(K(a,"RSA PRIVATE KEY"))})})}function Y(a){return new Promise(function(b){N(a).then(function(c){X(a).then(function(a){b({publicKey:c,privateKey:a})})})})}function Z(a,b){return crypto.subtle.encrypt({name:"RSA-OAEP"},a,T(b))}(function(a){a.event.fix=function(a){return function(b){b=a.apply(this,arguments);if(0===b.type.indexOf("copy")||0===b.type.indexOf("paste"))b.clipboardData=
b.originalEvent.clipboardData;return b}}(a.event.fix);var b={callback:a.noop,matchType:/image.*/};return a.fn.pasteImageReader=function(c){"function"===typeof c&&(c={callback:c});c=a.extend({},b,c);return this.each(function(){var b=this;return a(this).bind("paste",function(a){var f=!1;var d=a.clipboardData;return Array.prototype.forEach.call(d.types,function(a,e){if(!f&&(a.match(c.matchType)||d.items[e].type.match(c.matchType))){var h=d.items[e].getAsFile();a=new FileReader;a.onload=function(a){return c.callback.call(b,
{dataURL:a.target.result,event:a,file:h,name:h.name})};a.readAsDataURL(h);return f=!0}})})})}})(jQuery);window.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction;window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;var F=window.indexedDB.open("messages",1);F.onerror=function(a){console.error(a)};var G;F.onsuccess=function(a){console.log("Database initialised");
G=F.result;"allChat"!=l&&d(l)};F.onupgradeneeded=function(a){a=a.target.result;a.onerror=function(a){console.error("Error loading database.")};objectStore=a.createObjectStore("messages",{keyPath:"id",autoIncrement:!0});objectStore.createIndex("chat","chat",{unique:!1});objectStore.createIndex("sender","sender",{unique:!1});objectStore.createIndex("message","message",{unique:!1});console.log("Object store created.")};var n=document.getElementById("lines"),B=document.getElementById("contactsSearch"),
l=location.search.substring(1)?location.search.substring(1):"allChat",q={};"allChat"!=l&&(document.getElementsByTagName("span")[0].innerText="\u2630 "+("allChat"===l?"Cool Chat":l));var J=[],v=[],w=!1,D=null,u=document.querySelector(".settbtn");"serviceWorker"in navigator&&"PushManager"in window?navigator.serviceWorker.register("/static/service-worker.js").then(function(a){console.log("Service Worker is registered",a);D=a;c()}).catch(function(a){console.error("Service Worker Error",a)}):(console.warn("Push messaging is not supported"),
u.textContent="Push Not Supported");document.getElementById("Logout").addEventListener("click",function(){try{r()}catch(a){}localStorage.clear();location.reload();return!1});var m=io.connect();m.on("connect",function(){$("#chat").addClass("connected");null!==localStorage.getItem("name")&&null!==localStorage.getItem("passwd")&&m.emit("nickname",{nick:localStorage.getItem("name"),passwd:localStorage.getItem("passwd")},function(a){if(!a)return A("System","Reconnected to the server with localStorage"),
document.getElementById("message").disabled=!1,document.getElementById("imagefile").disabled=!1,$("#chat").addClass("nickname-set")})});m.on("announcement",function(a){$("#lines").append($("<p>").append($("<em>").text(a)))});m.on("reload",function(){return location.reload()});m.on("nicknames",function(a){v=a;$("#nicknames").empty().append($("<span>Online: </span>"));$("#nicknames").append($("<b>").text("allChat"));for(var b in v)$("#nicknames").append($(v[b]===localStorage.getItem("name")?'<b style="background: coral">':
"<b>").text(v[b]))});document.getElementById("nicknames").addEventListener("click",function(a){a=a.target;if("B"==a.tagName&&a.innerText!==localStorage.getItem("name"))if(cycleNavBar(),l=a.innerText,m.emit("getKey",l),document.getElementsByTagName("span")[1].innerText="\u2630 "+("allChat"===l?"Cool Chat":l),n.innerHTML="","allChat"===l){var b=$jscomp.makeIterator(J);for(a=b.next();!a.done;a=b.next())el=a.value,n.innerHTML+="<p><b>"+el.from+"</b>"+el.msg+"</p>"}else if(!d(l)&&null!=q[l])for(b=$jscomp.makeIterator(q[l]),
a=b.next();!a.done;a=b.next())a=a.value,n.innerHTML+="<p><b>"+a.from+"</b>"+a.msg+"</p>"});m.on("user message",function(a,b){return z(a,b)});m.on("user image",I);m.on("dm",function(a){a.from==l?p(a.from,a.msg):(y(a.from,a.from,a.msg),q.hasOwnProperty(a.from)||(q[a.from]=[]),q[a.from].push({from:a.from,msg:a.msg}))});m.on("reconnect",function(){m.emit("nickname",{nick:localStorage.getItem("name"),passwd:localStorage.getItem("passwd")},function(a){if(!a)return $("#message").val("").focus(),document.getElementById("message").disabled=
!1,document.getElementById("imagefile").disabled=!1,$("#chat").addClass("nickname-set");r();location.reload()});A("System","Reconnected to the server")});m.on("disconnect",function(){return A("System","Disconnected")});m.on("error",function(a){A("System",a?a:"A unknown error occurred")});B.onchange=B.onkeyup=B.onclick=function(){if(""!=B.value){nicks=fuzzysort.go(B.value,Object.values(v),{threshold:-999});console.log(nicks);$("#nicknames").empty().append($("<span>Online: </span>"));$("#nicknames").append($("<b>").text("allChat"));
for(var a in nicks)$("#nicknames").append($("<b>").text(nicks[a].target))}else for(a in $("#nicknames").empty().append($("<span>Online: </span>")),$("#nicknames").append($("<b>").text("allChat")),v)$("#nicknames").append($("<b>").text(v[a]))};$(function(){document.getElementById("register").onclick=function(){localStorage.setItem("name",$("#nick").val());localStorage.setItem("passwd",$("#passwd").val());m.emit("nickname",{nick:$("#nick").val(),passwd:$("#passwd").val()},function(a){if(!a)return $("#message").val("").focus(),
document.getElementById("message").disabled=!1,document.getElementById("imagefile").disabled=!1,$("#chat").addClass("nickname-set");$("#nickname-err").css("visibility","visible")});return!1};$("#send-message").submit(function(a){a.preventDefault();if(l)return x[l]?Z(x[l].encrypt,$("#message").val()).then(function(a){window.crypto.subtle.sign(E,O,a).then(function(b){p("me",$("#message").val());console.log("sending Encrypted MSG");m.emit("encryptedDM",{user:l,msg:a,signature:b});$("#message").val("").focus();
$("#lines").get(0).scrollTop=Number.MAX_SAFE_INTEGER})}):(p("me",$("#message").val()),m.emit("dm",{user:l,msg:$("#message").val()}),$("#message").val("").focus(),$("#lines").get(0).scrollTop=Number.MAX_SAFE_INTEGER),!1;alert("No dm");A("me",$("#message").val());m.emit("user message",$("#message").val());$("#message").val("").focus();$("#lines").get(0).scrollTop=Number.MAX_SAFE_INTEGER;return!1});$("#imagefile").bind("change",function(a){H(this.files[0],512E3,600,Infinity,.7,function(a){I("me",a);
m.emit("user image",a)})});$("#message").pasteImageReader(function(a){a=function(a,b,c){b=void 0===b?"":b;c=void 0===c?512:c;a=atob(a);for(var d=[],f=0;f<a.length;f+=c){for(var e=a.slice(f,f+c),h=Array(e.length),g=0;g<e.length;g++)h[g]=e.charCodeAt(g);e=new Uint8Array(h);d.push(e)}return new Blob(d,{type:b})}(a.dataURL.slice(22),a.dataURL.slice(5,a.dataURL.indexOf(";")));H(a,512E3,600,Infinity,.7,function(a,b){Q("me",b);m.emit("user image",a)})})});HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,
"toBlob",{value:function(a,b,c){c=atob(this.toDataURL(b,c).split(",")[1]);for(var d=c.length,f=new Uint8Array(d),e=0;e<d;e++)f[e]=c.charCodeAt(e);a(new Blob([f],{type:b||"image/png"}))}});window.URL=window.URL||window.webkitURL;var E={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"},modulusLength:2048,extractable:!1,publicExponent:new Uint8Array([1,0,1])},M={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),extractable:!1,hash:{name:"SHA-256"}},P=!1,O=!1;C(M,["encrypt","decrypt"]).then(function(a){P=
a;N(a).then(function(a){console.log("PushEncryptKey"+a);m.emit("PushEncryptKey",a)})}).catch(function(a){return console.log(a.message)});C(E,["sign","verify"]).then(function(a){O=a.privateKey;Y(a).then(function(a){console.log("PushSignKey"+a.publicKey);m.emit("PushSignKey",a.publicKey)})});var x={};m.on("establishEncryption",function(a,b){console.log("received Key from "+a+":");console.log(b);W(b.sign).then(function(c){V(b.encrypt).then(function(b){x[a]={encrypt:b,sign:c};console.log(c);console.log(b)})})});
m.on("encryptedDM",function(a){x[a.from]&&crypto.subtle.decrypt({name:"RSA-OAEP"},P.privateKey,a.msg).then(function(b){b=U(b);crypto.subtle.verify(E,x[a.from].sign,a.signature,a.msg).then(function(c){if(!c)return console.log("public Key:"),console.log(x[a.from].sign),console.log("signature:"),console.log(a.signature),console.log("message"),console.log(a.msg),console.log("decrypted msg"),console.log(b),alert(a.from+" send an invalid message!!!");a.from==l?p(a.from,b):(y(a.from,a.from,b),q.hasOwnProperty(a.from)||
(q[a.from]=[]),q[a.from].push({from:a.from,msg:b}));console.log("Signature verified after importing PEM public key:",c)})})})};